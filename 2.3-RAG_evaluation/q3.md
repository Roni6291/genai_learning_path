# RAG Evaluation - Reciprocal Rank (RR) & Mean Reciprocal Rank (MRR)

## ğŸ“š Given Data

### Retrieved Documents

| Rank | Document | Relevant? |
|------|----------|-----------|
| 1 | The Great Wall of China is visible from space | âœ–ï¸ No |
| 2 | China has the largest population in the world | âœ–ï¸ No |
| 3 | The Great Wall of China is a UNESCO World Heritage site | âœ”ï¸ Yes |
| 4 | Beijing is the capital of China | âœ–ï¸ No |

### Relevant Document
**"The Great Wall of China is a UNESCO World Heritage site."** âœ”ï¸

**Position:** Rank 3

---

## ğŸ“Š Reciprocal Rank (RR) Computation

The relevant document appears at rank 3.

**Formula:**
$$\text{RR} = \frac{1}{\text{rank of first relevant doc}} = \frac{1}{3} \approx 0.333$$

---

## ğŸ“ˆ Mean Reciprocal Rank (MRR) - Extension to Multiple Queries

When evaluating multiple queries, compute RR for each query and average them:

$$\text{MRR} = \frac{1}{N} \sum_{i=1}^{N} \text{RR}_i$$

### Example MRR Computation (3 Queries)

| Query | Rank of Relevant Doc | RR |
|-------|---------------------|-----|
| Query 1 | 3 | 1/3 â‰ˆ 0.333 |
| Query 2 | 1 | 1.0 |
| Query 3 | Not found | 0 |

**Calculation:**
$$\text{MRR} = \frac{\frac{1}{3} + 1 + 0}{3} = \frac{1.333}{3} \approx 0.444$$

---

## ğŸ¯ Final Results

| Metric | Value |
|--------|-------|
| **Reciprocal Rank (RR)** | 1/3 â‰ˆ 0.333 |
| **Mean Reciprocal Rank (MRR)** <br/> *(Example over 3 queries)* | 0.444 |
